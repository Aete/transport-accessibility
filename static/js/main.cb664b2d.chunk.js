(this["webpackJsonptransport-accessibility"]=this["webpackJsonptransport-accessibility"]||[]).push([[0],{101:function(t,a,n){},103:function(t,a,n){},104:function(t,a,n){},105:function(t,a,n){"use strict";n.r(a);var e=n(0),r=n(2),c=n.n(r),o=n(49),s=n.n(o),i=(n(101),n(50)),l=n(51),u=n(9),d=n.n(u),h=n(3);n(103);d.a.accessToken="pk.eyJ1Ijoic2doYW4iLCJhIjoiY2szamxqbjZnMGtmbTNjbXZzamh4cng3dSJ9.GGv4GVVoZ811d6PKi54PrA";var p=function(){var t=Object(r.useRef)(null),a=Object(r.useState)(null),n=Object(l.a)(a,2)[1];return Object(r.useEffect)((function(){var a=h.b[11].map((function(t,a){return[a,t]})).flat(1),e=new d.a.Map({container:t.current,style:"mapbox://styles/sghan/ck1ljdcmy16fc1cpg0f4qh3wu",center:[127.06243582034075,37.49804469532547],zoom:12.7,attributionControl:!1});return e.addControl(new d.a.AttributionControl({compact:!0})),e.on("load",(function(){e.addSource("hexagons",{type:"geojson",data:"https://raw.githubusercontent.com/Aete/transport-accessibility/master/src/data/hexagon_res_10_400m_count/hexagon_with_data.geojson"}),e.addLayer({id:"hexagons",type:"fill",source:"hexagons",layout:{},paint:{"fill-color":["interpolate",["linear"],["get","total_score"]].concat(Object(i.a)(a)),"fill-opacity":.7}}),n(e)})),e.on("click","hexagons",(function(t){var a=t.features[0].properties,n=a.x,r=a.y,c=a.score_bus,o=a.score_subway,s=a.score_bike,i=a.total_score;h.c(".spiderChart").remove();var l=f(i,c,o,s);(new d.a.Popup).setLngLat([n,r]).setHTML("".concat(l,' <div class="spiderChart"></div>')).addTo(e);!function(t,a){var n=a.score_bus,e=a.score_bike,r=a.score_subway,c=25,o=25,s=[0,0,240+o+25,240+c+25],i=t.append("svg").attr("viewBox",s).attr("preserveAspectRatio","xMinYMid meet"),l=290/parseInt(h.c("svg").style("width"))*12,u=i.append("g").attr("transform","translate(".concat(o,",").concat(c,")")),d=h.a().domain([0,5]).range([0,120]),p=[0,1,2,3,4,5],f=(u.selectAll(".axis-sub").data(p).enter().append("circle").attr("class","axis-sub").attr("cx",120).attr("cy",120).attr("fill","none").attr("stroke","#424242").attr("r",(function(t){return d(t)})),u.selectAll(".label").data(p.slice(1)).enter().append("text").text((function(t){return t})).attr("text-anchor","middle").attr("y",(function(t){return d(t)+d(5)+15})).attr("x",120).style("font-size","10px").attr("fill",(function(t){return"#636363"})),u.append("g").attr("transform","translate(".concat(120,",").concat(120,")")));f.append("circle").attr("cx",0).attr("cy",0).attr("fill","#636363").attr("r",1),f.selectAll(".axis-main").data([1,5,9]).enter().append("line").attr("class","axis-main").attr("x1",0).attr("y1",0).attr("x2",(function(t){return Math.cos(Math.PI*t/6)*d(5)})).attr("y2",(function(t){return Math.sin(Math.PI*t/6)*d(5)})).attr("stroke","#636363");var x="".concat(Math.cos(Math.PI/6)*d(+n),", ").concat(Math.sin(Math.PI/6)*d(+n)),b="0,".concat(-d(+r)),M="".concat(Math.cos(5*Math.PI/6)*d(+e),", ").concat(Math.sin(5*Math.PI/6)*d(+e));f.append("polygon").attr("fill","#2196F3").attr("fill-opacity",.3).attr("stroke","#2963FF").attr("stroke-width",2).attr("points","0,0 0,0 0,0").transition().duration(300).attr("points","".concat(x," ").concat(b," ").concat(M)),f.selectAll(".point").data([n,e,r]).enter().append("circle").attr("class","point").attr("cx",(function(t,a){return Math.cos(Math.PI*(4*a+1)/6)*d(t)})).attr("cy",(function(t,a){return Math.sin(Math.PI*(4*a+1)/6)*d(t)})).attr("r","3").attr("fill","#2196F3"),f.append("text").text("bus").attr("text-anchor","middle").attr("x",Math.cos(Math.PI/6)*d(6)).attr("y",Math.sin(Math.PI/6)*d(6)).attr("fill","#FFFFFF").style("font-size","".concat(l,"px")),f.append("text").text("bike").attr("text-anchor","middle").attr("x",Math.cos(5*Math.PI/6)*d(6)).attr("y",Math.sin(5*Math.PI/6)*d(6)).attr("fill","#FFFFFF").style("font-size","".concat(l,"px")),f.append("text").text("subway").attr("text-anchor","middle").attr("x",Math.cos(9*Math.PI/6)*d(6)).attr("y",Math.sin(9*Math.PI/6)*d(6)+12).attr("fill","#FFFFFF").style("font-size","".concat(l,"px"))}(h.c(".spiderChart"),{score_bus:c,score_subway:o,score_bike:s})})),function(){return e.remove()}}),[]),Object(e.jsx)("div",{className:"map",children:Object(e.jsx)("div",{className:"map-container",ref:t})})},f=function(t,a,n,e){return"\n    <section class='textInfo'>\n    <h1>Accessibility score</h1>\n    <ul>\n      <li>total score: ".concat(Math.round(100*t)/100," / 15</li>\n      <li>subway: ").concat(Math.round(100*n)/100," / 5</li>\n      <li>bus: ").concat(Math.round(100*a)/100," / 5</li>\n      <li>bike: ").concat(Math.round(100*e)/100," / 5</li>\n      <li><a>Methodolgy (click)</a></li>\n    </ul>\n    </section>\n  ")};n(104);var x=function(){return Object(e.jsx)("main",{className:"dashboard",children:Object(e.jsx)(p,{})})},b=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,106)).then((function(a){var n=a.getCLS,e=a.getFID,r=a.getFCP,c=a.getLCP,o=a.getTTFB;n(t),e(t),r(t),c(t),o(t)}))};s.a.render(Object(e.jsx)(c.a.StrictMode,{children:Object(e.jsx)(x,{})}),document.getElementById("root")),b()}},[[105,1,2]]]);
//# sourceMappingURL=main.cb664b2d.chunk.js.map